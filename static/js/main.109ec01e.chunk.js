(this["webpackJsonpdsr-editor"]=this["webpackJsonpdsr-editor"]||[]).push([[0],{198:function(e,t){},298:function(e,t,n){},325:function(e,t){},331:function(e,t){},333:function(e,t){},343:function(e,t){},345:function(e,t){},355:function(e,t){},356:function(e,t){},399:function(e,t){},401:function(e,t){},408:function(e,t){},409:function(e,t){},489:function(e,t,n){"use strict";n.r(t);var o=n(3),r=n.n(o),a=n(262),c=n.n(a),i=(n(298),n(14)),s=n(521),l=n(28),d=n(531),u=n(532),b=n(534),j=n(527),h=n(66),g=Object(o.createContext)({authState:{isLoggedIn:!1,walletAddr:""},authDispatcher:function(){}}),f=n(124),x=n.n(f),m="atk",p="addr",O={};Object.defineProperty(O,"authToken",{get:function(){return localStorage.getItem(m)},set:function(e){localStorage.setItem(m,e)}}),Object.defineProperty(O,"walletAddr",{get:function(){return x.a.load(p)},set:function(e){x.a.save(p,e,{path:"/"})}}),O.clearAccountData=function(){localStorage.removeItem(m),x.a.remove(p)};var v=O,w=function(e,t){var n,o=t.type,r=t.payload;console.log("dispatcher got state: ",o);var a=null!==(n=null===r||void 0===r?void 0:r.walletAddr)&&void 0!==n?n:"",c=null===r||void 0===r?void 0:r.token;switch(o){case y.AUTO_SYNC:return c?(v.authToken=c,{isLoggedIn:!0,walletAddr:a}):e;case y.LOGIN:return v.authToken=c,v.walletAddr=a,{isLoggedIn:!0,walletAddr:a};case y.LOGOUT:return v.clearAccountData(),{isLoggedIn:!1,walletAddr:""};default:return e}},y={AUTO_SYNC:0,LOGIN:1,LOGOUT:2},A=n(100),k=n(0),S=n.n(k),T=n(85),C=n(271),D=n(281),I=n(274),L=n.n(I),R=(n(461),L.a.create({baseURL:"https://stormy-temple-44410.herokuapp.com/"}));R.interceptors.request.use((function(e){var t=v.authToken;return e.headers["auth-token"]=t?"Bearer ".concat(t):"",e}));var W=function(){var e=Object(A.a)(S.a.mark((function e(t,n){var o,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("address",t),o.append("signed_address",n),e.next=5,R.post("/login",o).then((function(e){return e.data.access_token}));case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=new T.a("https://mainnet-tezos.giganode.io"),P=new C.a({name:"D Showroom"});G.setWalletProvider(P);var F=function(){var e=Object(o.useContext)(g),t=(e.authState,e.authDispatcher),n=Object(o.useState)(""),r=Object(i.a)(n,2),a=r[0],c=r[1],s=function(){var e=Object(A.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.client.getActiveAccount();case 2:(t=e.sent)?(n=t.address,a===n?console.log("Already connected: ",n):console.log("Another wallet connected: ",n)):console.log("No wallet connnection!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(A.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("Requesting permissions..."),P.client.requestPermissions().then((function(e){var n=e.address;c(n),P.client.requestSignPayload({signingType:D.a.RAW,payload:n}).then((function(e){console.log("Get signature. Try login..."),W(n,e.signature).then((function(e){console.log("Login suceed!"),t({type:y.LOGIN,payload:{walletAddr:n,token:e}})}))}))}))}catch(n){c(""),console.log("Got error:",n)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{walletAddr:a,connectWallet:l,checkWalletConnection:s}},z=n(11),B=function(e){var t=e.children,n=e.to,o=Object(l.g)().pathname===n;return Object(z.jsx)(h.b,{to:n,children:Object(z.jsx)(d.a,{color:o?"text.primary":"text.secondary",sx:function(e){return{mr:4,fontWeight:"bold",position:"relative","&::after":o?{position:"absolute",content:"''",height:4,bottom:-6,margin:"0 auto",left:0,right:0,width:"80%",background:e.palette.info.main}:{}}},children:t})})},N=function(){var e,t,n=Object(o.useContext)(g),r=n.authState,a=(n.authDispatcher,F().connectWallet);return Object(z.jsx)(u.a,{color:"default",enableColorOnDark:!0,children:Object(z.jsxs)(b.a,{children:[Object(z.jsx)(h.b,{to:"/",children:Object(z.jsx)(d.a,{variant:"h5",color:"text.primary",sx:{fontWeight:"bold",userSelect:"none"},children:"D SHOWROOM"})}),Object(z.jsx)(d.a,{sx:{flexGrow:1}}),null!==r&&void 0!==r&&r.isLoggedIn?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(B,{to:"/rooms",children:"Rooms"}),Object(z.jsx)(B,{to:"/collections",children:"Collections"}),Object(z.jsx)(j.a,{variant:"outlined",sx:{textTransform:"none"},children:(null===r||void 0===r||null===(e=r.walletAddr)||void 0===e?void 0:e.slice(0,5))+"..."+(null===r||void 0===r||null===(t=r.walletAddr)||void 0===t?void 0:t.slice(-5))})]}):Object(z.jsx)(j.a,{variant:"outlined",onClick:function(){a()},children:"Connect"})]})})},U=function(){var e=Object(l.h)();return Object(z.jsxs)(s.a,{sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(z.jsx)(d.a,{variant:"h1",color:"primary",sx:{textAlign:"center"},children:"Welcome to DSR."}),Object(z.jsx)(j.a,{sx:{textAlign:"center",padding:2,mt:5},size:"large",onClick:function(t){e("/rooms"),t.preventDefault()},href:"/rooms",children:Object(z.jsx)(d.a,{variant:"h5",children:"Get Started"})})]})},E=function(){return Object(z.jsxs)(s.a,{sx:{width:"100%",height:"100%"},children:[Object(z.jsx)(s.a,{component:"img",src:"/images/test.jpg",sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",zIndex:-1}}),Object(z.jsx)(d.a,{variant:"h2",color:"text.primary",sx:{textAlign:"center",mt:"5%",fontWeight:"bold"},children:"Nothing here!!!"})]})},H=n(102),_=n(528),q=n(522),M=n(535),Y=n(536),J=n(537),V=n(523),K=n(538),Q=n(525),X=n(278),Z=n.n(X),$=n(279),ee=n.n($),te=function(e){var t=e.room,n=null!==t&&void 0!==t?t:{},r=n.img,a=n.name,c=n.id,s=Object(o.useState)(!1),l=Object(i.a)(s,2),u=l[0],b=l[1];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(M.a,{sx:{width:360,margin:2},raised:!0,children:[Object(z.jsx)(Y.a,{component:"img",image:r,sx:{height:210,objectFit:"cover"}}),Object(z.jsxs)(J.a,{sx:{pt:1,"&:last-child":{paddingBottom:1.5},position:"relative"},children:[Object(z.jsx)(d.a,{variant:"h6",sx:{mb:.5},children:a}),Object(z.jsx)(V.a,{title:"Click to copy",arrow:!0,followCursor:!0,children:Object(z.jsxs)(d.a,{variant:"body2",color:"text.secondary",sx:{width:"fit-content",display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer","&:hover":{color:"text.primary",textDecoration:"underline dotted 2px"}},onClick:function(){navigator.clipboard.writeText(c).then((function(){b(!0)}))},children:[Object(z.jsx)(Z.a,{fontSize:"small",sx:{mr:.5}}),c]})}),Object(z.jsx)(V.a,{title:"Edit",placement:"top",arrow:!0,componentsProps:{tooltip:{style:{marginBottom:8}}},children:Object(z.jsx)(K.a,{sx:{position:"absolute",right:8,bottom:8},children:Object(z.jsx)(ee.a,{})})})]})]}),Object(z.jsx)(Q.a,{open:u,autoHideDuration:1e3,anchorOrigin:{vertical:"bottom",horizontal:"center"},onClose:Object(o.useCallback)((function(){b(!1)}),[]),message:"Room ID copied",sx:{"& .MuiPaper-root":{minWidth:"min-content",pl:3,pr:3}}})]})},ne=n(280),oe=n.n(ne),re=[{img:"/images/test.jpg",name:"Room 1",id:"HomHom"},{img:"/images/test.jpg",name:"Room 2",id:"HomMim"},{img:"/images/test.jpg",name:"Room 3",id:"RedRed"},{img:"/images/test.jpg",name:"Room 4",id:"Doctor"},{img:"/images/test.jpg",name:"Room 5",id:"SongBo"}],ae=function(){var e=Object(o.useState)(re),t=Object(i.a)(e,2),n=t[0],r=(t[1],{item:!0,container:!0,direction:"row",justifyContent:"center",xs:12,md:6,lg:4,xl:3});return Object(z.jsx)(q.a,{sx:{padding:"36px 24px",boxSizing:"border-box",width:"100%"},children:Object(z.jsxs)(_.a,{container:!0,direction:"row",sx:{margin:"auto"},children:[null===n||void 0===n?void 0:n.map((function(e){return Object(z.jsx)(_.a,Object(H.a)(Object(H.a)({},r),{},{children:Object(z.jsx)(te,{room:e})}),e.id)})),Object(z.jsx)(_.a,Object(H.a)(Object(H.a)({},r),{},{color:"divider",children:Object(z.jsx)(j.a,{variant:"outlined",color:"inherit",sx:{width:360,height:286,margin:2,borderWidth:3},children:Object(z.jsx)(oe.a,{sx:{fontSize:80}})})}))]})})},ce=n(164),ie=n.n(ce),se=function(){var e=Object(o.useContext)(g).authState;return null!==e&&void 0!==e&&e.isLoggedIn?Object(z.jsx)(l.b,{}):Object(z.jsx)(l.a,{to:"/",replace:!0})},le=function(){var e=Object(l.g)(),t=Object(o.useReducer)(w,{},(function(){var e=v.authToken;if(e&&v.walletAddr){var t,n=(null!==(t=ie.a.decode(e))&&void 0!==t?t:{}).addr;if(n===v.walletAddr)return{isLoggedIn:!0,walletAddr:n}}return v.clearAccountData(),{isLoggedIn:!1,walletAddr:""}})),n=Object(i.a)(t,2),r=n[0],a=n[1];return Object(o.useEffect)((function(){console.log("Check local account at:",e.pathname),v.authToken&&v.walletAddr||a({type:y.LOGOUT}),window.scrollTo({top:0,behavior:"smooth"})}),[e]),Object(o.useEffect)((function(){function e(e){if(e.key===m)t(e.newValue)}var t=function(e){if(e&&v.walletAddr){var t=ie.a.decode(e).addr;if(t===v.walletAddr)return void a({type:y.AUTO_SYNC,payload:{walletAddr:t,token:e}})}a({type:y.LOGOUT})};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),Object(z.jsxs)(g.Provider,{value:{authState:r,authDispatcher:a},children:[Object(z.jsx)(N,{}),Object(z.jsx)(s.a,{sx:{width:"100%",height:"calc(100% - 56px)",mt:"56px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",overflow:"auto",scrollBehavior:"smooth"},children:Object(z.jsxs)(l.e,{children:[Object(z.jsx)(l.c,{path:"/",element:Object(z.jsx)(U,{})}),Object(z.jsx)(l.c,{path:"/rooms",element:Object(z.jsx)(se,{}),children:Object(z.jsx)(l.c,{path:"/rooms",element:Object(z.jsx)(ae,{})})}),Object(z.jsx)(l.c,{path:"*",element:Object(z.jsx)(E,{})})]})})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,539)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),a(e),c(e)}))},ue=n(529),be=n(530),je=n(165),he=Object(be.a)(Object(je.a)({palette:{mode:"dark",common:{black:"#000",white:"rgba(255, 255, 255, 0.8)"},primary:{main:"#fff"},secondary:{main:"rgba(255, 255, 255, 0.7)"},error:{main:"#f44336",light:"#e57373",dark:"#d32f2f",contrastText:"rgba(255, 255, 255, 0.8)"},warning:{main:"#ffa726",light:"#ffb74d",dark:"#f57c00",contrastText:"rgba(0, 0, 0, 0.87)"},info:{main:"#29b6f6",light:"#4fc3f7",dark:"#0288d1",contrastText:"rgba(0, 0, 0, 0.87)"},success:{main:"#66bb6a",light:"#81c784",dark:"#388e3c",contrastText:"rgba(0, 0, 0, 0.87)"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.6)",disabled:"rgba(255, 255, 255, 0.4)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{popup:"#242424",paper:"#161616",default:"#121212"},action:{active:"rgba(255, 255, 255, 0.8)",hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}},overrides:{}}));c.a.createRoot(document.getElementById("root")).render(Object(z.jsx)(h.a,{children:Object(z.jsx)(ue.a,{theme:he,children:Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(le,{})})})})),de()}},[[489,1,2]]]);
//# sourceMappingURL=main.109ec01e.chunk.js.map