(this["webpackJsonpdsr-editor"]=this["webpackJsonpdsr-editor"]||[]).push([[0],{202:function(e,t){},301:function(e,t,n){},328:function(e,t){},334:function(e,t){},336:function(e,t){},346:function(e,t){},348:function(e,t){},358:function(e,t){},359:function(e,t){},402:function(e,t){},404:function(e,t){},411:function(e,t){},412:function(e,t){},491:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n.n(r),a=n(266),c=n.n(a),i=(n(301),n(14)),s=n(527),l=n(28),d=n(539),u=n(540),b=n(542),j=n(535),h=n(64),x=Object(r.createContext)({authState:{isLoggedIn:!1,walletAddr:""},authDispatcher:function(){}}),f=n(129),g=n.n(f),p="atk",m="addr",O={};Object.defineProperty(O,"authToken",{get:function(){return localStorage.getItem(p)},set:function(e){localStorage.setItem(p,e)}}),Object.defineProperty(O,"walletAddr",{get:function(){return g.a.load(m)},set:function(e){g.a.save(m,e,{path:"/"})}}),O.clearAccountData=function(){localStorage.removeItem(p),g.a.remove(m)};var v=O,w=function(e,t){var n,r=t.type,o=t.payload;console.log("dispatcher got state: ",r);var a=null!==(n=null===o||void 0===o?void 0:o.walletAddr)&&void 0!==n?n:"",c=null===o||void 0===o?void 0:o.token;switch(r){case y.AUTO_SYNC:return c?(v.authToken=c,{isLoggedIn:!0,walletAddr:a}):e;case y.LOGIN:return v.authToken=c,v.walletAddr=a,{isLoggedIn:!0,walletAddr:a};case y.LOGOUT:return v.clearAccountData(),{isLoggedIn:!1,walletAddr:""};default:return e}},y={AUTO_SYNC:0,LOGIN:1,LOGOUT:2},k=n(67),A=n(0),S=n.n(A),C=n(91),D=n(275),I=n(285),T=n(2),R=n(1),L=n(7),E=n(8),G=n(13),U=n(278),W=n.n(U),z=(n(464),W.a.create({baseURL:"https://stormy-temple-44410.herokuapp.com/"}));z.interceptors.request.use((function(e){var t=v.authToken;return e.headers.Authorization=t?"Bearer ".concat(t):"",e}));var P=function(e){Object(L.a)(n,e);var t=Object(E.a)(n);function n(e){var r;for(var o in Object(R.a)(this,n),r=t.call(this),e)r.append(o,e[o]);return r}return Object(T.a)(n)}(Object(G.a)(FormData)),F=function(){var e=Object(k.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("/login/".concat(t,"/payload")).then((function(e){return e.data.payload}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(k.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post("/login",new P({address:t,signature:n})).then((function(e){return e.data.access_token}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offset,e.next=3,z.get("/collections",{params:{offset:n}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=new C.a("https://mainnet-tezos.giganode.io"),M=new D.a({name:"D Showroom"});H.setWalletProvider(M);var q=function(){var e=Object(r.useContext)(x),t=(e.authState,e.authDispatcher),n=Object(r.useState)(""),o=Object(i.a)(n,2),a=o[0],c=o[1],s=function(){var e=Object(k.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.client.getActiveAccount();case 2:(t=e.sent)?(n=t.address,a===n?console.log("Already connected: ",n):console.log("Another wallet connected: ",n)):console.log("No wallet connnection!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(k.a)(S.a.mark((function e(){var n,r,o,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Requesting permissions..."),e.next=4,M.client.requestPermissions();case 4:return n=e.sent,r=n.address,c(r),console.log("Get permission. Get payload..."),e.next=10,F(r);case 10:return o=e.sent,console.log("Get payload. Request signature..."),e.next=14,M.client.requestSignPayload({signingType:I.a.MICHELINE,payload:o});case 14:return a=e.sent,console.log("Get signature. Try login..."),e.next=18,B(r,a.signature).then((function(e){console.log("Login suceed!"),t({type:y.LOGIN,payload:{walletAddr:r,token:e}})}));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),c(""),console.log("Got error:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return{walletAddr:a,connectWallet:l,checkWalletConnection:s}},_=n(10),Y=function(e){var t=e.children,n=e.to,r=Object(l.g)().pathname===n;return Object(_.jsx)(h.b,{to:n,children:Object(_.jsx)(d.a,{color:r?"text.primary":"text.secondary",sx:{mr:4,fontWeight:"bold",position:"relative","&::after":r?{position:"absolute",content:"''",height:2,bottom:-3,margin:"0 auto",left:0,right:0,width:"100%",backgroundColor:"text.primary"}:{}},children:t})})},J=function(){var e,t,n=Object(r.useContext)(x),o=n.authState,a=n.authDispatcher,c=q().connectWallet;return Object(_.jsx)(u.a,{color:"default",enableColorOnDark:!0,children:Object(_.jsxs)(b.a,{children:[Object(_.jsx)(h.b,{to:"/",children:Object(_.jsx)(d.a,{variant:"h5",color:"text.primary",sx:{fontWeight:"bold",userSelect:"none"},children:"D SHOWROOM"})}),Object(_.jsx)(d.a,{sx:{flexGrow:1}}),null!==o&&void 0!==o&&o.isLoggedIn?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Y,{to:"/rooms",children:"Rooms"}),Object(_.jsx)(Y,{to:"/collections",children:"Collections"}),Object(_.jsx)(j.a,{variant:"outlined",sx:{textTransform:"none"},onDoubleClick:function(){a({type:y.LOGOUT})},children:(null===o||void 0===o||null===(e=o.walletAddr)||void 0===e?void 0:e.slice(0,5))+"..."+(null===o||void 0===o||null===(t=o.walletAddr)||void 0===t?void 0:t.slice(-5))})]}):Object(_.jsx)(j.a,{variant:"outlined",onClick:function(){c()},children:"Connect"})]})})},V=function(){var e=Object(l.h)();return Object(_.jsxs)(s.a,{sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(_.jsx)(d.a,{variant:"h1",color:"primary",sx:{textAlign:"center"},children:"Welcome to DSR."}),Object(_.jsx)(j.a,{sx:{textAlign:"center",padding:2,mt:5},size:"large",onClick:function(t){e("/rooms"),t.preventDefault()},href:"/rooms",children:Object(_.jsx)(d.a,{variant:"h5",children:"Get Started"})})]})},K=function(){return Object(_.jsxs)(s.a,{sx:{width:"100%",height:"100%"},children:[Object(_.jsx)(s.a,{component:"img",src:"/DSR-Editor/images/test.jpg",sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",zIndex:-1}}),Object(_.jsx)(d.a,{variant:"h2",color:"text.primary",sx:{textAlign:"center",mt:"5%",fontWeight:"bold"},children:"Nothing here!!!"})]})},Q=n(54),X=n(536),Z=n(528),$=n(543),ee=n(544),te=n(545),ne=n(530),re=n(546),oe=n(533),ae=n(282),ce=n.n(ae),ie=n(283),se=n.n(ie),le=function(e){var t=e.room,n=null!==t&&void 0!==t?t:{},o=n.img,a=n.name,c=n.id,s=Object(r.useState)(!1),l=Object(i.a)(s,2),u=l[0],b=l[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)($.a,{sx:{width:360,margin:2},raised:!0,children:[Object(_.jsx)(ee.a,{component:"img",image:o,sx:{height:210,objectFit:"cover"}}),Object(_.jsxs)(te.a,{sx:{pt:1,"&:last-child":{paddingBottom:1.5},position:"relative"},children:[Object(_.jsx)(d.a,{variant:"h6",sx:{mb:.5},children:a}),Object(_.jsx)(ne.a,{title:"Click to copy",arrow:!0,followCursor:!0,children:Object(_.jsxs)(d.a,{variant:"body2",color:"text.secondary",sx:{width:"fit-content",display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer","&:hover":{color:"text.primary",textDecoration:"underline dotted 2px"}},onClick:function(){navigator.clipboard.writeText(c).then((function(){b(!0)}))},children:[Object(_.jsx)(ce.a,{fontSize:"small",sx:{mr:.5}}),c]})}),Object(_.jsx)(ne.a,{title:"Edit",placement:"top",arrow:!0,componentsProps:{tooltip:{style:{marginBottom:8}}},children:Object(_.jsx)(re.a,{sx:{position:"absolute",right:8,bottom:8},children:Object(_.jsx)(se.a,{})})})]})]}),Object(_.jsx)(oe.a,{open:u,autoHideDuration:1e3,anchorOrigin:{vertical:"bottom",horizontal:"center"},onClose:Object(r.useCallback)((function(){b(!1)}),[]),message:"Room ID copied",sx:{"& .MuiPaper-root":{minWidth:"min-content",pl:3,pr:3}}})]})},de=n(284),ue=n.n(de),be=[{img:"/DSR-Editor/images/test.jpg",name:"Room 1",id:"HomHom"},{img:"/DSR-Editor/images/test.jpg",name:"Room 2",id:"HomMim"},{img:"/DSR-Editor/images/test.jpg",name:"Room 3",id:"RedRed"},{img:"/DSR-Editor/images/test.jpg",name:"Room 4",id:"Doctor"},{img:"/DSR-Editor/images/test.jpg",name:"Room 5",id:"SongBo"}],je=function(){var e=Object(r.useState)(be),t=Object(i.a)(e,2),n=t[0],o=(t[1],{item:!0,container:!0,direction:"row",justifyContent:"center",xs:12,md:6,lg:4,xl:3});return Object(_.jsx)(Z.a,{sx:{padding:"36px 24px",boxSizing:"border-box",width:"100%"},children:Object(_.jsxs)(X.a,{container:!0,direction:"row",sx:{margin:"auto"},children:[null===n||void 0===n?void 0:n.map((function(e){return Object(_.jsx)(X.a,Object(Q.a)(Object(Q.a)({},o),{},{children:Object(_.jsx)(le,{room:e})}),e.id)})),Object(_.jsx)(X.a,Object(Q.a)(Object(Q.a)({},o),{},{color:"divider",children:Object(_.jsx)(j.a,{variant:"outlined",color:"inherit",sx:{width:360,height:286,margin:2,borderWidth:3},children:Object(_.jsx)(ue.a,{sx:{fontSize:80}})})}))]})})},he=n(167),xe=n.n(he),fe=n(537),ge=n(532),pe=n(547),me=function(e){var t=e.collection,n=null!==t&&void 0!==t?t:{},r=n.name,o=n.thumbnailUri,a=n.displayUri,c=!r;return Object(_.jsxs)($.a,{sx:{width:270,margin:2,height:"max-content"},children:[Object(_.jsx)(ee.a,Object(Q.a)({sx:{aspectRatio:"1",objectFit:"contain",backgroundColor:"background.paper"}},c?{component:pe.a,variant:"rectangular",width:"100%",height:"auto",animation:"wave"}:{component:"img",image:null!==a&&void 0!==a?a:o})),Object(_.jsx)(te.a,{sx:{width:"100%",boxSizing:"border-box","&:last-child":{paddingBottom:1.5}},children:Object(_.jsx)(d.a,{variant:"body1",sx:{mb:.5,width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c?Object(_.jsx)(pe.a,{}):r})})]})},Oe=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(),c=Object(i.a)(a,2),u=c[0],b=c[1],j=Object(l.g)(),x=new URLSearchParams(j.search),f=parseInt(x.get("page")||"1",10);Object(r.useEffect)((function(){var e=24*(f-1);o(Array.from({length:24},(function(){return{}})));var t=function(){var t=Object(k.a)(S.a.mark((function t(){var n,r,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N({offset:e});case 2:n=t.sent,r=n.tokens,a=n.count,o(r),b(a);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[f]);var g={item:!0,container:!0,direction:"row",justifyContent:"center",xs:12,sm:6,md:4,lg:3,xl:2};return Object(_.jsxs)(s.a,{sx:{position:"relative",padding:"36px 24px",boxSizing:"border-box",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(_.jsx)(X.a,{container:!0,direction:"row",sx:{margin:"auto"},children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(_.jsx)(X.a,Object(Q.a)(Object(Q.a)({},g),{},{children:Object(_.jsx)(me,{collection:e})}),"collection_".concat(t))}))}),0===u&&Object(_.jsx)(d.a,{variant:"h2",color:"text.primary",sx:{textAlign:"center",mt:"5%",fontWeight:"bold"},children:"You don't have any collection!"}),(null!==u&&void 0!==u?u:0)>24&&Object(_.jsx)(fe.a,{sx:function(e){return{position:"sticky",bottom:20,borderRadius:"9999px",display:"flex",backgroundColor:"".concat(e.palette.background.default,"88"),flexDirection:"row",justifyContent:"center",alignItems:"center",mt:1.5,padding:1}},page:f,count:Math.ceil(u/24),renderItem:function(e){return Object(_.jsx)(ge.a,Object(Q.a)({component:h.b,to:"".concat(1===e.page?"":"?page=".concat(e.page))},e))}})]})},ve=function(){var e=Object(r.useContext)(x).authState;return null!==e&&void 0!==e&&e.isLoggedIn?Object(_.jsx)(l.b,{}):Object(_.jsx)(l.a,{to:"/",replace:!0})},we=function(){var e=Object(l.g)(),t=Object(r.useReducer)(w,{},(function(){var e=v.authToken;if(e&&v.walletAddr){var t,n=(null!==(t=xe.a.decode(e))&&void 0!==t?t:{}).addr;if(n===v.walletAddr)return{isLoggedIn:!0,walletAddr:n}}return v.clearAccountData(),{isLoggedIn:!1,walletAddr:""}})),n=Object(i.a)(t,2),o=n[0],a=n[1];return Object(r.useEffect)((function(){console.log("Check local account at:",e.pathname),v.authToken&&v.walletAddr||a({type:y.LOGOUT}),window.scrollTo({top:0,behavior:"smooth"})}),[e]),Object(r.useEffect)((function(){function e(e){if(e.key===p)t(e.newValue)}var t=function(e){if(e&&v.walletAddr){var t=xe.a.decode(e).addr;if(t===v.walletAddr)return void a({type:y.AUTO_SYNC,payload:{walletAddr:t,token:e}})}a({type:y.LOGOUT})};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),Object(_.jsxs)(x.Provider,{value:{authState:o,authDispatcher:a},children:[Object(_.jsx)(J,{}),Object(_.jsx)(s.a,{sx:{width:"100%",height:"calc(100% - 56px)",mt:"56px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",overflow:"auto",scrollBehavior:"smooth"},children:Object(_.jsxs)(l.e,{children:[Object(_.jsx)(l.c,{path:"/",element:Object(_.jsx)(V,{})}),Object(_.jsx)(l.c,{path:"/rooms",element:Object(_.jsx)(ve,{}),children:Object(_.jsx)(l.c,{path:"/rooms",element:Object(_.jsx)(je,{})})}),Object(_.jsx)(l.c,{path:"/collections",element:Object(_.jsx)(ve,{}),children:Object(_.jsx)(l.c,{path:"/collections",element:Object(_.jsx)(Oe,{})})}),Object(_.jsx)(l.c,{path:"*",element:Object(_.jsx)(K,{})})]})})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,548)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))},ke=n(538),Ae=n(529),Se=n(168),Ce=Object(Ae.a)(Object(Se.a)({palette:{mode:"dark",common:{black:"#000",white:"rgba(255, 255, 255, 0.8)"},primary:{main:"#fff"},secondary:{main:"rgba(255, 255, 255, 0.7)"},error:{main:"#f44336",light:"#e57373",dark:"#d32f2f",contrastText:"rgba(255, 255, 255, 0.8)"},warning:{main:"#ffa726",light:"#ffb74d",dark:"#f57c00",contrastText:"rgba(0, 0, 0, 0.87)"},info:{main:"#29b6f6",light:"#4fc3f7",dark:"#0288d1",contrastText:"rgba(0, 0, 0, 0.87)"},success:{main:"#66bb6a",light:"#81c784",dark:"#388e3c",contrastText:"rgba(0, 0, 0, 0.87)"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.6)",disabled:"rgba(255, 255, 255, 0.4)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{popup:"#242424",paper:"#161616",default:"#121212"},action:{active:"rgba(255, 255, 255, 0.8)",hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}},overrides:{}}));c.a.createRoot(document.getElementById("root")).render(Object(_.jsx)(h.a,{children:Object(_.jsx)(ke.a,{theme:Ce,children:Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(we,{})})})})),ye()}},[[491,1,2]]]);
//# sourceMappingURL=main.4462f665.chunk.js.map