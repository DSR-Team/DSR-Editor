(this["webpackJsonpdsr-editor"]=this["webpackJsonpdsr-editor"]||[]).push([[0],{198:function(e,t){},298:function(e,t,n){},325:function(e,t){},331:function(e,t){},333:function(e,t){},343:function(e,t){},345:function(e,t){},355:function(e,t){},356:function(e,t){},399:function(e,t){},401:function(e,t){},408:function(e,t){},409:function(e,t){},489:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n.n(r),a=n(262),c=n.n(a),i=(n(298),n(14)),s=n(521),l=n(28),d=n(531),u=n(532),b=n(534),j=n(527),h=n(66),g=Object(r.createContext)({authState:{isLoggedIn:!1,walletAddr:""},authDispatcher:function(){}}),f=n(124),x=n.n(f),p="atk",m="addr",O={};Object.defineProperty(O,"authToken",{get:function(){return localStorage.getItem(p)},set:function(e){localStorage.setItem(p,e)}}),Object.defineProperty(O,"walletAddr",{get:function(){return x.a.load(m)},set:function(e){x.a.save(m,e,{path:"/"})}}),O.clearAccountData=function(){localStorage.removeItem(p),x.a.remove(m)};var v=O,w=function(e,t){var n,r=t.type,o=t.payload;console.log("dispatcher got state: ",r);var a=null!==(n=null===o||void 0===o?void 0:o.walletAddr)&&void 0!==n?n:"",c=null===o||void 0===o?void 0:o.token;switch(r){case y.AUTO_SYNC:return c?(v.authToken=c,{isLoggedIn:!0,walletAddr:a}):e;case y.LOGIN:return v.authToken=c,v.walletAddr=a,{isLoggedIn:!0,walletAddr:a};case y.LOGOUT:return v.clearAccountData(),{isLoggedIn:!1,walletAddr:""};default:return e}},y={AUTO_SYNC:0,LOGIN:1,LOGOUT:2},k=n(83),A=n(0),S=n.n(A),D=n(86),C=n(271),T=n(281),I=n(2),L=n(1),R=n(7),G=n(8),E=n(13),W=n(274),P=n.n(W),F=(n(461),P.a.create({baseURL:"https://stormy-temple-44410.herokuapp.com/"}));F.interceptors.request.use((function(e){var t=v.authToken;return e.headers["auth-token"]=t?"Bearer ".concat(t):"",e}));var N=function(e){Object(R.a)(n,e);var t=Object(G.a)(n);function n(e){var r;for(var o in Object(L.a)(this,n),r=t.call(this),e)r.append(o,e[o]);return r}return Object(I.a)(n)}(Object(E.a)(FormData)),U=function(){var e=Object(k.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post("/get_payload",new N({address:t})).then((function(e){return e.data.result}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(k.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post("/login",new N({address:t,signed_address:n})).then((function(e){return e.data.access_token}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=new D.a("https://mainnet-tezos.giganode.io"),H=new C.a({name:"D Showroom"});B.setWalletProvider(H);var _=function(){var e=Object(r.useContext)(g),t=(e.authState,e.authDispatcher),n=Object(r.useState)(""),o=Object(i.a)(n,2),a=o[0],c=o[1],s=function(){var e=Object(k.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.client.getActiveAccount();case 2:(t=e.sent)?(n=t.address,a===n?console.log("Already connected: ",n):console.log("Another wallet connected: ",n)):console.log("No wallet connnection!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(k.a)(S.a.mark((function e(){var n,r,o,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Requesting permissions..."),e.next=4,H.client.requestPermissions();case 4:return n=e.sent,r=n.address,c(r),console.log("Get permission. Get payload..."),e.next=10,U(r);case 10:return o=e.sent,console.log("Get payload. Request signature..."),e.next=14,H.client.requestSignPayload({signingType:T.a.MICHELINE,payload:o});case 14:return a=e.sent,console.log("Get signature. Try login..."),e.next=18,z(r,a.signature).then((function(e){console.log("Login suceed!"),t({type:y.LOGIN,payload:{walletAddr:r,token:e}})}));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),c(""),console.log("Got error:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return{walletAddr:a,connectWallet:l,checkWalletConnection:s}},q=n(11),M=function(e){var t=e.children,n=e.to,r=Object(l.g)().pathname===n;return Object(q.jsx)(h.b,{to:n,children:Object(q.jsx)(d.a,{color:r?"text.primary":"text.secondary",sx:function(e){return{mr:4,fontWeight:"bold",position:"relative","&::after":r?{position:"absolute",content:"''",height:4,bottom:-6,margin:"0 auto",left:0,right:0,width:"80%",background:e.palette.info.main}:{}}},children:t})})},Y=function(){var e,t,n=Object(r.useContext)(g),o=n.authState,a=n.authDispatcher,c=_().connectWallet;return Object(q.jsx)(u.a,{color:"default",enableColorOnDark:!0,children:Object(q.jsxs)(b.a,{children:[Object(q.jsx)(h.b,{to:"/",children:Object(q.jsx)(d.a,{variant:"h5",color:"text.primary",sx:{fontWeight:"bold",userSelect:"none"},children:"D SHOWROOM"})}),Object(q.jsx)(d.a,{sx:{flexGrow:1}}),null!==o&&void 0!==o&&o.isLoggedIn?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(M,{to:"/rooms",children:"Rooms"}),Object(q.jsx)(M,{to:"/collections",children:"Collections"}),Object(q.jsx)(j.a,{variant:"outlined",sx:{textTransform:"none"},onDoubleClick:function(){a({type:y.LOGOUT})},children:(null===o||void 0===o||null===(e=o.walletAddr)||void 0===e?void 0:e.slice(0,5))+"..."+(null===o||void 0===o||null===(t=o.walletAddr)||void 0===t?void 0:t.slice(-5))})]}):Object(q.jsx)(j.a,{variant:"outlined",onClick:function(){c()},children:"Connect"})]})})},J=function(){var e=Object(l.h)();return Object(q.jsxs)(s.a,{sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(q.jsx)(d.a,{variant:"h1",color:"primary",sx:{textAlign:"center"},children:"Welcome to DSR."}),Object(q.jsx)(j.a,{sx:{textAlign:"center",padding:2,mt:5},size:"large",onClick:function(t){e("/rooms"),t.preventDefault()},href:"/rooms",children:Object(q.jsx)(d.a,{variant:"h5",children:"Get Started"})})]})},V=function(){return Object(q.jsxs)(s.a,{sx:{width:"100%",height:"100%"},children:[Object(q.jsx)(s.a,{component:"img",src:"/DSR-Editor/images/test.jpg",sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",zIndex:-1}}),Object(q.jsx)(d.a,{variant:"h2",color:"text.primary",sx:{textAlign:"center",mt:"5%",fontWeight:"bold"},children:"Nothing here!!!"})]})},K=n(102),Q=n(528),X=n(522),Z=n(535),$=n(536),ee=n(537),te=n(523),ne=n(538),re=n(525),oe=n(278),ae=n.n(oe),ce=n(279),ie=n.n(ce),se=function(e){var t=e.room,n=null!==t&&void 0!==t?t:{},o=n.img,a=n.name,c=n.id,s=Object(r.useState)(!1),l=Object(i.a)(s,2),u=l[0],b=l[1];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)(Z.a,{sx:{width:360,margin:2},raised:!0,children:[Object(q.jsx)($.a,{component:"img",image:o,sx:{height:210,objectFit:"cover"}}),Object(q.jsxs)(ee.a,{sx:{pt:1,"&:last-child":{paddingBottom:1.5},position:"relative"},children:[Object(q.jsx)(d.a,{variant:"h6",sx:{mb:.5},children:a}),Object(q.jsx)(te.a,{title:"Click to copy",arrow:!0,followCursor:!0,children:Object(q.jsxs)(d.a,{variant:"body2",color:"text.secondary",sx:{width:"fit-content",display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer","&:hover":{color:"text.primary",textDecoration:"underline dotted 2px"}},onClick:function(){navigator.clipboard.writeText(c).then((function(){b(!0)}))},children:[Object(q.jsx)(ae.a,{fontSize:"small",sx:{mr:.5}}),c]})}),Object(q.jsx)(te.a,{title:"Edit",placement:"top",arrow:!0,componentsProps:{tooltip:{style:{marginBottom:8}}},children:Object(q.jsx)(ne.a,{sx:{position:"absolute",right:8,bottom:8},children:Object(q.jsx)(ie.a,{})})})]})]}),Object(q.jsx)(re.a,{open:u,autoHideDuration:1e3,anchorOrigin:{vertical:"bottom",horizontal:"center"},onClose:Object(r.useCallback)((function(){b(!1)}),[]),message:"Room ID copied",sx:{"& .MuiPaper-root":{minWidth:"min-content",pl:3,pr:3}}})]})},le=n(280),de=n.n(le),ue=[{img:"/DSR-Editor/images/test.jpg",name:"Room 1",id:"HomHom"},{img:"/DSR-Editor/images/test.jpg",name:"Room 2",id:"HomMim"},{img:"/DSR-Editor/images/test.jpg",name:"Room 3",id:"RedRed"},{img:"/DSR-Editor/images/test.jpg",name:"Room 4",id:"Doctor"},{img:"/DSR-Editor/images/test.jpg",name:"Room 5",id:"SongBo"}],be=function(){var e=Object(r.useState)(ue),t=Object(i.a)(e,2),n=t[0],o=(t[1],{item:!0,container:!0,direction:"row",justifyContent:"center",xs:12,md:6,lg:4,xl:3});return Object(q.jsx)(X.a,{sx:{padding:"36px 24px",boxSizing:"border-box",width:"100%"},children:Object(q.jsxs)(Q.a,{container:!0,direction:"row",sx:{margin:"auto"},children:[null===n||void 0===n?void 0:n.map((function(e){return Object(q.jsx)(Q.a,Object(K.a)(Object(K.a)({},o),{},{children:Object(q.jsx)(se,{room:e})}),e.id)})),Object(q.jsx)(Q.a,Object(K.a)(Object(K.a)({},o),{},{color:"divider",children:Object(q.jsx)(j.a,{variant:"outlined",color:"inherit",sx:{width:360,height:286,margin:2,borderWidth:3},children:Object(q.jsx)(de.a,{sx:{fontSize:80}})})}))]})})},je=n(164),he=n.n(je),ge=function(){var e=Object(r.useContext)(g).authState;return null!==e&&void 0!==e&&e.isLoggedIn?Object(q.jsx)(l.b,{}):Object(q.jsx)(l.a,{to:"/",replace:!0})},fe=function(){var e=Object(l.g)(),t=Object(r.useReducer)(w,{},(function(){var e=v.authToken;if(e&&v.walletAddr){var t,n=(null!==(t=he.a.decode(e))&&void 0!==t?t:{}).addr;if(n===v.walletAddr)return{isLoggedIn:!0,walletAddr:n}}return v.clearAccountData(),{isLoggedIn:!1,walletAddr:""}})),n=Object(i.a)(t,2),o=n[0],a=n[1];return Object(r.useEffect)((function(){console.log("Check local account at:",e.pathname),v.authToken&&v.walletAddr||a({type:y.LOGOUT}),window.scrollTo({top:0,behavior:"smooth"})}),[e]),Object(r.useEffect)((function(){function e(e){if(e.key===p)t(e.newValue)}var t=function(e){if(e&&v.walletAddr){var t=he.a.decode(e).addr;if(t===v.walletAddr)return void a({type:y.AUTO_SYNC,payload:{walletAddr:t,token:e}})}a({type:y.LOGOUT})};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),Object(q.jsxs)(g.Provider,{value:{authState:o,authDispatcher:a},children:[Object(q.jsx)(Y,{}),Object(q.jsx)(s.a,{sx:{width:"100%",height:"calc(100% - 56px)",mt:"56px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",overflow:"auto",scrollBehavior:"smooth"},children:Object(q.jsxs)(l.e,{children:[Object(q.jsx)(l.c,{path:"/",element:Object(q.jsx)(J,{})}),Object(q.jsx)(l.c,{path:"/rooms",element:Object(q.jsx)(ge,{}),children:Object(q.jsx)(l.c,{path:"/rooms",element:Object(q.jsx)(be,{})})}),Object(q.jsx)(l.c,{path:"*",element:Object(q.jsx)(V,{})})]})})]})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,539)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))},pe=n(529),me=n(530),Oe=n(165),ve=Object(me.a)(Object(Oe.a)({palette:{mode:"dark",common:{black:"#000",white:"rgba(255, 255, 255, 0.8)"},primary:{main:"#fff"},secondary:{main:"rgba(255, 255, 255, 0.7)"},error:{main:"#f44336",light:"#e57373",dark:"#d32f2f",contrastText:"rgba(255, 255, 255, 0.8)"},warning:{main:"#ffa726",light:"#ffb74d",dark:"#f57c00",contrastText:"rgba(0, 0, 0, 0.87)"},info:{main:"#29b6f6",light:"#4fc3f7",dark:"#0288d1",contrastText:"rgba(0, 0, 0, 0.87)"},success:{main:"#66bb6a",light:"#81c784",dark:"#388e3c",contrastText:"rgba(0, 0, 0, 0.87)"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.6)",disabled:"rgba(255, 255, 255, 0.4)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{popup:"#242424",paper:"#161616",default:"#121212"},action:{active:"rgba(255, 255, 255, 0.8)",hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}},overrides:{}}));c.a.createRoot(document.getElementById("root")).render(Object(q.jsx)(h.a,{children:Object(q.jsx)(pe.a,{theme:ve,children:Object(q.jsx)(o.a.StrictMode,{children:Object(q.jsx)(fe,{})})})})),xe()}},[[489,1,2]]]);
//# sourceMappingURL=main.f5271f90.chunk.js.map